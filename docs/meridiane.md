# Meridiane bridge setup

Meridiane generates an Angular "bridge" package from the API Platform OpenAPI spec.
The bridge bundles runtime helpers (HTTP/Hydra, facades, SSE) and optional TypeScript models.

## Quick start (Makefile)

From the repo root:

```bash
make bridge
```

Common overrides:

```bash
make bridge OPENAPI_URL=http://localhost:8001/api/docs.json
make bridge APP_VERSION=0.1.0 MERIDIANE_FORMATS=application/ld+json,application/json
```

Artifacts:
- `openapi.json` at the repo root (fetched spec)
- `dist/bridge` (generated package)
- `webfront/bridge` (copied package used by the frontend)

## Frontend best practices (bridge consumption)

Keep components simple and push data concerns into the bridge layers:

- Store -> repository -> service -> component.
- Store is the source of truth (signals only).
- Repository wires the bridge facades and syncs the store.
- Service exposes async methods, default params, and fetch orchestration.
- Components are display-only: no HTTP, no IRI normalization, no filtering.

Other key rules:
- Do not use `route.snapshot` for reactive screens; use `toSignal(route.paramMap)` + `computed/effect`.
- Use a single auth/identity service to resolve current user/IRI.
- `computed()` must not trigger fetches; use `effect()` for side effects.
- Show errors via toast and keep a page-level error signal if needed.
- Avoid local entity caches (`Map`) or nested signals.

## Notes

- The bridge is generated by the CLI and should not be edited manually.
- The Makefile defaults `FRONTEND_DIR=webfront` to match this repo layout.
