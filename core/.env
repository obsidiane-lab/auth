# In all environments, the following files are loaded if they exist,
# the latter taking precedence over the former:
#
#  * .env                contains default values for the environment variables needed by the app
#  * .env.local          uncommitted file with local overrides
#  * .env.$APP_ENV       committed environment-specific defaults
#  * .env.$APP_ENV.local uncommitted environment-specific overrides
#
# Real environment variables win over .env files.
#
# DO NOT DEFINE PRODUCTION SECRETS IN THIS FILE NOR IN ANY OTHER COMMITTED FILES.
# https://symfony.com/doc/current/configuration/secrets.html
#
# Run "composer dump-env prod" to compile .env files for production use (requires symfony/flex >=1.2).
# https://symfony.com/doc/current/best_practices.html#use-environment-variables-for-infrastructure-configuration
# Defaults target production; override locally with .env.local/.env.dev or container env vars.

###> symfony/framework-bundle ###
APP_ENV=prod
APP_DEBUG=0
APP_SECRET=
###< symfony/framework-bundle ###

###> symfony/routing ###
# Configure how to generate URLs in non-HTTP contexts, such as CLI commands.
# See https://symfony.com/doc/current/routing.html#generating-urls-in-commands
APP_BASE_URL=
###< symfony/routing ###

###> doctrine/doctrine-bundle ###
DATABASE_URL=
###< doctrine/doctrine-bundle ###

###> nelmio/cors-bundle ###
ALLOWED_ORIGINS="^https?://example.com(:[0-9]+)?$"
###< nelmio/cors-bundle ###

# JWT HS256
JWT_ALGORITHM=HS256
JWT_SECRET=
# php -r "echo bin2hex(random_bytes(64)),PHP_EOL;"

# Claims / TTL
JWT_ISSUER=${APP_BASE_URL}
JWT_AUDIENCE=core-api
JWT_ACCESS_TTL=600
JWT_REFRESH_TTL=2592000

# Cookies
# Access token cookie shared entre AUTH/SERVICE
ACCESS_COOKIE_NAME="__Secure-at"
ACCESS_COOKIE_DOMAIN=""
ACCESS_COOKIE_PATH="/"
ACCESS_COOKIE_SAMESITE="lax"
ACCESS_COOKIE_SECURE="1"
# Refresh token cookie (Gesdinet)
REFRESH_COOKIE_NAME="__Host-rt"
REFRESH_COOKIE_SECURE="1"

# Redirection / sécurité
FRONTEND_REDIRECT_URL=
TRUSTED_PROXIES=127.0.0.1

REGISTRATION_ENABLED=1
BRANDING_NAME="Obsidiane Auth"
PASSWORD_STRENGTH_LEVEL=2
FRONTEND_THEME_MODE=dark
FRONTEND_THEME_COLOR=base
FRONTEND_THEME_COLORS=base,red,blue,orange,yellow,green,violet

# Rate limits (config-driven)
RATE_LOGIN_LIMIT=5
RATE_LOGIN_INTERVAL="60 seconds"
RATE_LOGIN_GLOBAL_LIMIT=25

# Docs
API_DOCS_ENABLED=0

###> obsidiane/notifuse-bundle ###
NOTIFUSE_API_BASE_URL=
NOTIFUSE_WORKSPACE_ID=
NOTIFUSE_API_KEY=
NOTIFUSE_TEMPLATE_WELCOME=welcome
NOTIFUSE_TEMPLATE_RESET_PASSWORD=resetpass
###< obsidiane/notifuse-bundle ###
