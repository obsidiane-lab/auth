# Meridiane bridge setup

Meridiane generates an Angular "bridge" package from the API Platform OpenAPI spec.
The bridge bundles runtime helpers (HTTP/Hydra, facades, SSE) and optional TypeScript models.

## Quick start (Makefile)

From the repo root:

```bash
make bridge
```

Prerequisites:
- the core is running;
- `API_DOCS_ENABLED=1` so the spec is available at `http://localhost:8000/api/docs.json`.

Artifacts:
- `webfront/bridge` (generated package used by the frontend)

If you need a different spec URL or package version, update the `bridge` target in `Makefile`.

## Frontend best practices (bridge consumption)

Keep components simple and push data concerns into the bridge layers:

- Store -> repository -> service -> component.
- Store is the source of truth (signals only).
- Repository wires the bridge facades and syncs the store.
- Service exposes async methods, default params, and fetch orchestration.
- Components are display-only: no HTTP, no IRI normalization, no filtering.

Other key rules:
- Do not use `route.snapshot` for reactive screens; use `toSignal(route.paramMap)` + `computed/effect`.
- Use a single auth/identity service to resolve current user/IRI.
- `computed()` must not trigger fetches; use `effect()` for side effects.
- Show errors via toast and keep a page-level error signal if needed.
- Avoid local entity caches (`Map`) or nested signals.

## Notes

- The bridge is generated by the CLI and should not be edited manually.
